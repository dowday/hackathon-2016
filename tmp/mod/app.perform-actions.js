{"intl":"","src":"require( 'app.perform-actions', function(exports, module) {  /**********************************************************************\n require( 'app.perform-actions' )\n -----------------------------------------------------------------------\n\n **********************************************************************/\nvar $ = require(\"dom\");\nvar Data = require('data');\nvar Tpl = require(\"x-template\");\nvar InputBool = require(\"input-boolean\");\nvar InputText = require(\"input-text\");\nvar InputFile = require(\"input-file\");\nvar InputDate = require(\"input-date\");\n\n\nmodule.exports = function( children ) {\n    var body = $.div();\n\n    try {\n        if( typeof children === 'undefined' ) {\n            throw( \"children is undefined! But it must be an Array.\" );\n        }\n        children.forEach(function ( child, idx ) {\n            try {\n                if( !Array.isArray( child ) ) {\n                    throw( \"Element #\" + idx + \" should be an array!\" );\n                }\n                var actionID = child[0];\n                var action = actions[actionID];\n                if( action ) {\n                    var element = action.apply( body, child.slice( 1 ) );\n                    if( typeof element === 'string' ) {\n                        location.hash = '#' + element;\n                        return;\n                    }\n                    if( element ) body.appendChild( element );\n                } else {\n                    throw \"Unknonw type `\" + actionID + \"`!\";\n                }\n            }\n            catch( ex ) {\n                console.error( \"Exception: \", ex );\n                console.error( \"Child #\" + idx, child );\n                throw( null );\n            }\n        }, this);\n    }\n    catch( ex ) {\n        if( ex !== null ) {\n            console.error( \"Exception: \", ex );\n        }\n        console.error( \"Error in: \", children );\n        throw( ex );\n    }\n    return body;\n};\n\n\nvar actions = {\n    text: function( args ) {\n        var div = $.tag( 'p' );\n        div.innerHTML = parse( args );\n        return div;\n    },\n    button: function( args ) {\n        var btn = $.tag( 'a', args.style || 'button' );\n        var context = {};\n        if( args.freeze ) {\n            if( !Array.isArray( args.freeze ) ) {\n                args.freeze = [args.freeze];\n            }\n            args.freeze.forEach(function ( name ) {\n                context[name] = Data.get( name );\n            });\n\n        }\n        $.on( btn, function() {\n            var target = parse( args.action, context );\n            if( typeof target === 'string' && target.length > 0 ) {\n                location.hash = \"#\" + target;\n            }\n        });\n        btn.innerHTML = parse( args.text );\n        return btn;\n    },\n    nurse: function( args ) {\n        var content = $.div();\n        var children = Tpl.appendTo( \"nurse\", content );\n        children.text.innerHTML = parse( args );\n        return content;\n    },\n    reset: function( args ) {\n        Data.reset();\n        var key, val;\n        for( key in args ) {\n            val = args[key];\n            Data.set( key, val );\n        }\n    },\n    set: function( args ) {\n        var key, val;\n        for( key in args ) {\n            val = args[key];\n            Data.set( key, parse( val ) );\n        }\n    },\n    \"input-bool\": function( args ) {\n        return InputBool( args );\n    },\n    \"input-text\": function( args ) {\n        return InputText( args );\n    },\n    \"input-file\": function( args ) {\n        return InputFile( args );\n    },\n    \"input-date\": function( args ) {\n        return InputDate( args );\n    },\n    row: function( args ) {\n        var tbl = $.div( 'tbl' );\n        if( !Array.isArray( args ) ) args = [args];\n        args.forEach(function ( arg ) {\n            var body = module.exports( [arg] );\n            $.add( tbl, $.div([ body ], {\n                style: \"width:\" + (100 / args.length) + \"%\"\n            }));            \n        });\n        return tbl;\n    },\n    loop: function( args, children ) {\n        var list = parse( args.list );\n        var item = parse( args.item );\n        var sort = parse( args.sort );\n\n        var arr = Data.get( list );\n        if( !Array.isArray( arr ) ) arr = [arr];\n\n        // Sorting.\n        if( typeof sort === 'string' && sort.trim().length > 0 ) {\n            sort = [sort];\n        }\n        if( Array.isArray( sort ) ) {\n            arr.sort(function( a, b ) {\n                var i, att;\n                for (i = 0 ; i < sort.length ; i++) {\n                    att = sort[i];\n                    if( a[att] < b[att] ) return -1;\n                    if( a[att] > b[att] ) return 1;\n                }\n                return 0;\n            });\n        }\n\n        // Filtering.\n        if( typeof args.filter === 'function' ) {\n            arr = arr.filter( args.filter );\n        }\n\n        var content = $.div();\n        arr.forEach(function ( child ) {\n            Data.set( item, child );\n            content.appendChild( module.exports( children ) );\n        });\n\n        return content;\n    }\n};\n\n\nfunction parse( input, context ) {\n    return Data.parse( input, context );\n}\n });\n","zip":"require(\"app.perform-actions\",function(r,t){function e(r,t){return i.parse(r,t)}var n=require(\"dom\"),i=require(\"data\"),o=require(\"x-template\"),u=require(\"input-boolean\"),a=require(\"input-text\"),f=require(\"input-file\"),c=require(\"input-date\");t.exports=function(r){var t=n.div();try{if(\"undefined\"==typeof r)throw\"children is undefined! But it must be an Array.\";r.forEach(function(r,e){try{if(!Array.isArray(r))throw\"Element #\"+e+\" should be an array!\";var n=r[0],i=s[n];if(!i)throw\"Unknonw type `\"+n+\"`!\";var o=i.apply(t,r.slice(1));if(\"string\"==typeof o)return void(location.hash=\"#\"+o);o&&t.appendChild(o)}catch(u){throw console.error(\"Exception: \",u),console.error(\"Child #\"+e,r),null}},this)}catch(e){throw null!==e&&console.error(\"Exception: \",e),console.error(\"Error in: \",r),e}return t};var s={text:function(r){var t=n.tag(\"p\");return t.innerHTML=e(r),t},button:function(r){var t=n.tag(\"a\",r.style||\"button\"),o={};return r.freeze&&(Array.isArray(r.freeze)||(r.freeze=[r.freeze]),r.freeze.forEach(function(r){o[r]=i.get(r)})),n.on(t,function(){var t=e(r.action,o);\"string\"==typeof t&&t.length>0&&(location.hash=\"#\"+t)}),t.innerHTML=e(r.text),t},nurse:function(r){var t=n.div(),i=o.appendTo(\"nurse\",t);return i.text.innerHTML=e(r),t},reset:function(r){i.reset();var t,e;for(t in r)e=r[t],i.set(t,e)},set:function(r){var t,n;for(t in r)n=r[t],i.set(t,e(n))},\"input-bool\":function(r){return u(r)},\"input-text\":function(r){return a(r)},\"input-file\":function(r){return f(r)},\"input-date\":function(r){return c(r)},row:function(r){var e=n.div(\"tbl\");return Array.isArray(r)||(r=[r]),r.forEach(function(i){var o=t.exports([i]);n.add(e,n.div([o],{style:\"width:\"+100/r.length+\"%\"}))}),e},loop:function(r,o){var u=e(r.list),a=e(r.item),f=e(r.sort),c=i.get(u);Array.isArray(c)||(c=[c]),\"string\"==typeof f&&f.trim().length>0&&(f=[f]),Array.isArray(f)&&c.sort(function(r,t){var e,n;for(e=0;e<f.length;e++){if(n=f[e],r[n]<t[n])return-1;if(r[n]>t[n])return 1}return 0}),\"function\"==typeof r.filter&&(c=c.filter(r.filter));var s=n.div();return c.forEach(function(r){i.set(a,r),s.appendChild(t.exports(o))}),s}}});\n//# sourceMappingURL=app.perform-actions.js.map","map":{"version":3,"file":"app.perform-actions.js.map","sources":["app.perform-actions.js"],"sourcesContent":["require( 'app.perform-actions', function(exports, module) {  /**********************************************************************\n require( 'app.perform-actions' )\n -----------------------------------------------------------------------\n\n **********************************************************************/\nvar $ = require(\"dom\");\nvar Data = require('data');\nvar Tpl = require(\"x-template\");\nvar InputBool = require(\"input-boolean\");\nvar InputText = require(\"input-text\");\nvar InputFile = require(\"input-file\");\nvar InputDate = require(\"input-date\");\n\n\nmodule.exports = function( children ) {\n    var body = $.div();\n\n    try {\n        if( typeof children === 'undefined' ) {\n            throw( \"children is undefined! But it must be an Array.\" );\n        }\n        children.forEach(function ( child, idx ) {\n            try {\n                if( !Array.isArray( child ) ) {\n                    throw( \"Element #\" + idx + \" should be an array!\" );\n                }\n                var actionID = child[0];\n                var action = actions[actionID];\n                if( action ) {\n                    var element = action.apply( body, child.slice( 1 ) );\n                    if( typeof element === 'string' ) {\n                        location.hash = '#' + element;\n                        return;\n                    }\n                    if( element ) body.appendChild( element );\n                } else {\n                    throw \"Unknonw type `\" + actionID + \"`!\";\n                }\n            }\n            catch( ex ) {\n                console.error( \"Exception: \", ex );\n                console.error( \"Child #\" + idx, child );\n                throw( null );\n            }\n        }, this);\n    }\n    catch( ex ) {\n        if( ex !== null ) {\n            console.error( \"Exception: \", ex );\n        }\n        console.error( \"Error in: \", children );\n        throw( ex );\n    }\n    return body;\n};\n\n\nvar actions = {\n    text: function( args ) {\n        var div = $.tag( 'p' );\n        div.innerHTML = parse( args );\n        return div;\n    },\n    button: function( args ) {\n        var btn = $.tag( 'a', args.style || 'button' );\n        var context = {};\n        if( args.freeze ) {\n            if( !Array.isArray( args.freeze ) ) {\n                args.freeze = [args.freeze];\n            }\n            args.freeze.forEach(function ( name ) {\n                context[name] = Data.get( name );\n            });\n\n        }\n        $.on( btn, function() {\n            var target = parse( args.action, context );\n            if( typeof target === 'string' && target.length > 0 ) {\n                location.hash = \"#\" + target;\n            }\n        });\n        btn.innerHTML = parse( args.text );\n        return btn;\n    },\n    nurse: function( args ) {\n        var content = $.div();\n        var children = Tpl.appendTo( \"nurse\", content );\n        children.text.innerHTML = parse( args );\n        return content;\n    },\n    reset: function( args ) {\n        Data.reset();\n        var key, val;\n        for( key in args ) {\n            val = args[key];\n            Data.set( key, val );\n        }\n    },\n    set: function( args ) {\n        var key, val;\n        for( key in args ) {\n            val = args[key];\n            Data.set( key, parse( val ) );\n        }\n    },\n    \"input-bool\": function( args ) {\n        return InputBool( args );\n    },\n    \"input-text\": function( args ) {\n        return InputText( args );\n    },\n    \"input-file\": function( args ) {\n        return InputFile( args );\n    },\n    \"input-date\": function( args ) {\n        return InputDate( args );\n    },\n    row: function( args ) {\n        var tbl = $.div( 'tbl' );\n        if( !Array.isArray( args ) ) args = [args];\n        args.forEach(function ( arg ) {\n            var body = module.exports( [arg] );\n            $.add( tbl, $.div([ body ], {\n                style: \"width:\" + (100 / args.length) + \"%\"\n            }));            \n        });\n        return tbl;\n    },\n    loop: function( args, children ) {\n        var list = parse( args.list );\n        var item = parse( args.item );\n        var sort = parse( args.sort );\n\n        var arr = Data.get( list );\n        if( !Array.isArray( arr ) ) arr = [arr];\n\n        // Sorting.\n        if( typeof sort === 'string' && sort.trim().length > 0 ) {\n            sort = [sort];\n        }\n        if( Array.isArray( sort ) ) {\n            arr.sort(function( a, b ) {\n                var i, att;\n                for (i = 0 ; i < sort.length ; i++) {\n                    att = sort[i];\n                    if( a[att] < b[att] ) return -1;\n                    if( a[att] > b[att] ) return 1;\n                }\n                return 0;\n            });\n        }\n\n        // Filtering.\n        if( typeof args.filter === 'function' ) {\n            arr = arr.filter( args.filter );\n        }\n\n        var content = $.div();\n        arr.forEach(function ( child ) {\n            Data.set( item, child );\n            content.appendChild( module.exports( children ) );\n        });\n\n        return content;\n    }\n};\n\n\nfunction parse( input, context ) {\n    return Data.parse( input, context );\n}\n });\n"],"names":["require","exports","module","parse","input","context","Data","$","Tpl","InputBool","InputText","InputFile","InputDate","children","body","div","forEach","child","idx","Array","isArray","actionID","action","actions","element","apply","slice","location","hash","appendChild","ex","console","error","this","text","args","tag","innerHTML","button","btn","style","freeze","name","get","on","target","length","nurse","content","appendTo","reset","key","val","set","input-bool","input-text","input-file","input-date","row","tbl","arg","add","loop","list","item","sort","arr","trim","a","b","i","att","filter"],"mappings":"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"},"dependencies":["mod/app.perform-actions","mod/dom","mod/data","mod/x-template","mod/input-boolean","mod/input-text","mod/input-file","mod/input-date"]}