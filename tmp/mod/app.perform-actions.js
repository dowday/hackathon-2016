{"intl":"","src":"require( 'app.perform-actions', function(exports, module) {  /**********************************************************************\r\n require( 'app.perform-actions' )\r\n -----------------------------------------------------------------------\r\n \r\n **********************************************************************/\r\nvar $ = require(\"dom\");\r\nvar Data = require('data');\r\nvar Tpl = require(\"x-template\");\r\nvar InputBool = require(\"input-boolean\");\r\nvar InputText = require(\"input-text\");\r\nvar InputFile = require(\"input-file\");\r\nvar InputDate = require(\"input-date\");\r\n\r\n\r\nmodule.exports = function( children ) {\r\n    var body = $.div();\r\n\r\n    children.forEach(function ( child, idx ) {\r\n        if( !Array.isArray( child ) ) {\r\n            console.error( \"Element #\" + idx + \" should be an array!\" );\r\n            console.info(\"[app.perform-actions] child=...\", child);\r\n            console.info(\"[app.perform-actions] children=...\", children);\r\n        }\r\n        var actionID = child[0];\r\n        var action = actions[actionID];\r\n        if( action ) {\r\n            var element = action.apply( body, child.slice( 1 ) );\r\n            if( typeof element === 'string' ) {\r\n                location.hash = '#' + element;\r\n                return;\r\n            }\r\n            if( element ) body.appendChild( element );\r\n        } else {\r\n            throw \"Unknonw type `\" + actionID + \"`!\";\r\n        }\r\n    });\r\n\r\n    return body;\r\n};\r\n\r\n\r\nvar actions = {\r\n    text: function( args ) {\r\n        var div = $.tag( 'p' );\r\n        div.innerHTML = parse( args );\r\n        return div;\r\n    },\r\n    button: function( args ) {\r\n        var btn = $.tag( 'a', 'button' );\r\n        $.on( btn, function() {\r\n            var target = parse( args.action );\r\n            if( typeof target === 'string' && target.length > 0 ) {\r\n                location.hash = \"#\" + target;\r\n            }\r\n        });\r\n        btn.innerHTML = parse( args.text );\r\n        return btn;\r\n    },\r\n    nurse: function( args ) {\r\n        var content = $.div();\r\n        var children = Tpl.appendTo( \"nurse\", content );\r\n        children.text.innerHTML = parse( args );\r\n        return content;\r\n    },\r\n    reset: function( args ) {\r\n        Data.reset();\r\n        var key, val;\r\n        for( key in args ) {\r\n            val = args[key];\r\n            Data.set( key, val );\r\n        }\r\n    },\r\n    set: function( args ) {\r\n        var key, val;\r\n        for( key in args ) {\r\n            val = args[key];\r\n            Data.set( key, val );\r\n        }\r\n    },\r\n    \"input-bool\": function( args ) {\r\n        return InputBool( args );\r\n    },\r\n    \"input-text\": function( args ) {\r\n        return InputText( args );\r\n    },\r\n    \"input-file\": function( args ) {\r\n        return InputFile( args );\r\n    },\r\n    \"input-date\": function( args ) {\r\n        return InputDate( args );\r\n    },\r\n    loop: function( args, children ) {\r\n        var list = parse( args.list );\r\n        var item = parse( args.item );\r\n        var sort = parse( args.sort );\r\n        \r\n        var arr = Data.get( list );\r\n        if( !Array.isArray( arr ) ) arr = [arr];\r\n\r\n        // Sorting.\r\n        if( typeof sort === 'string' && sort.trim().length > 0 ) {\r\n            sort = [sort];\r\n        }\r\n        if( Array.isArray( sort ) ) {\r\n            arr.sort(function( a, b ) {\r\n                var i, att;\r\n                for (i = 0 ; i < sort.length ; i++) {\r\n                    att = sort[i];\r\n                    if( a[att] < b[att] ) return -1;\r\n                    if( a[att] > b[att] ) return 1;\r\n                }\r\n                return 0;\r\n            });\r\n        }\r\n\r\n        // Filtering.\r\n        if( typeof args.filter === 'function' ) {\r\n            arr = arr.filter( args.filter );\r\n        }\r\n\r\n        var content = $.div();\r\n        arr.forEach(function ( child ) {\r\n            Data.set( item, child );\r\n            content.appendChild( module.exports( children ) );\r\n        });\r\n\r\n        return content;\r\n    }\r\n};\r\n\r\n\r\nfunction parse( input ) {\r\n    return Data.parse( input );\r\n}\r\n\r\n });\r\n","zip":"require(\"app.perform-actions\",function(r,n){function t(r){return i.parse(r)}var e=require(\"dom\"),i=require(\"data\"),o=require(\"x-template\"),u=require(\"input-boolean\"),a=require(\"input-text\"),f=require(\"input-file\"),p=require(\"input-date\");n.exports=function(r){var n=e.div();return r.forEach(function(t,e){Array.isArray(t)||(console.error(\"Element #\"+e+\" should be an array!\"),console.info(\"[app.perform-actions] child=...\",t),console.info(\"[app.perform-actions] children=...\",r));var i=t[0],o=c[i];if(!o)throw\"Unknonw type `\"+i+\"`!\";var u=o.apply(n,t.slice(1));return\"string\"==typeof u?void(location.hash=\"#\"+u):void(u&&n.appendChild(u))}),n};var c={text:function(r){var n=e.tag(\"p\");return n.innerHTML=t(r),n},button:function(r){var n=e.tag(\"a\",\"button\");return e.on(n,function(){var n=t(r.action);\"string\"==typeof n&&n.length>0&&(location.hash=\"#\"+n)}),n.innerHTML=t(r.text),n},nurse:function(r){var n=e.div(),i=o.appendTo(\"nurse\",n);return i.text.innerHTML=t(r),n},reset:function(r){i.reset();var n,t;for(n in r)t=r[n],i.set(n,t)},set:function(r){var n,t;for(n in r)t=r[n],i.set(n,t)},\"input-bool\":function(r){return u(r)},\"input-text\":function(r){return a(r)},\"input-file\":function(r){return f(r)},\"input-date\":function(r){return p(r)},loop:function(r,o){var u=t(r.list),a=t(r.item),f=t(r.sort),p=i.get(u);Array.isArray(p)||(p=[p]),\"string\"==typeof f&&f.trim().length>0&&(f=[f]),Array.isArray(f)&&p.sort(function(r,n){var t,e;for(t=0;t<f.length;t++){if(e=f[t],r[e]<n[e])return-1;if(r[e]>n[e])return 1}return 0}),\"function\"==typeof r.filter&&(p=p.filter(r.filter));var c=e.div();return p.forEach(function(r){i.set(a,r),c.appendChild(n.exports(o))}),c}}});\n//# sourceMappingURL=app.perform-actions.js.map","map":{"version":3,"file":"app.perform-actions.js.map","sources":["app.perform-actions.js"],"sourcesContent":["require( 'app.perform-actions', function(exports, module) {  /**********************************************************************\r\n require( 'app.perform-actions' )\r\n -----------------------------------------------------------------------\r\n \r\n **********************************************************************/\r\nvar $ = require(\"dom\");\r\nvar Data = require('data');\r\nvar Tpl = require(\"x-template\");\r\nvar InputBool = require(\"input-boolean\");\r\nvar InputText = require(\"input-text\");\r\nvar InputFile = require(\"input-file\");\r\nvar InputDate = require(\"input-date\");\r\n\r\n\r\nmodule.exports = function( children ) {\r\n    var body = $.div();\r\n\r\n    children.forEach(function ( child, idx ) {\r\n        if( !Array.isArray( child ) ) {\r\n            console.error( \"Element #\" + idx + \" should be an array!\" );\r\n            console.info(\"[app.perform-actions] child=...\", child);\r\n            console.info(\"[app.perform-actions] children=...\", children);\r\n        }\r\n        var actionID = child[0];\r\n        var action = actions[actionID];\r\n        if( action ) {\r\n            var element = action.apply( body, child.slice( 1 ) );\r\n            if( typeof element === 'string' ) {\r\n                location.hash = '#' + element;\r\n                return;\r\n            }\r\n            if( element ) body.appendChild( element );\r\n        } else {\r\n            throw \"Unknonw type `\" + actionID + \"`!\";\r\n        }\r\n    });\r\n\r\n    return body;\r\n};\r\n\r\n\r\nvar actions = {\r\n    text: function( args ) {\r\n        var div = $.tag( 'p' );\r\n        div.innerHTML = parse( args );\r\n        return div;\r\n    },\r\n    button: function( args ) {\r\n        var btn = $.tag( 'a', 'button' );\r\n        $.on( btn, function() {\r\n            var target = parse( args.action );\r\n            if( typeof target === 'string' && target.length > 0 ) {\r\n                location.hash = \"#\" + target;\r\n            }\r\n        });\r\n        btn.innerHTML = parse( args.text );\r\n        return btn;\r\n    },\r\n    nurse: function( args ) {\r\n        var content = $.div();\r\n        var children = Tpl.appendTo( \"nurse\", content );\r\n        children.text.innerHTML = parse( args );\r\n        return content;\r\n    },\r\n    reset: function( args ) {\r\n        Data.reset();\r\n        var key, val;\r\n        for( key in args ) {\r\n            val = args[key];\r\n            Data.set( key, val );\r\n        }\r\n    },\r\n    set: function( args ) {\r\n        var key, val;\r\n        for( key in args ) {\r\n            val = args[key];\r\n            Data.set( key, val );\r\n        }\r\n    },\r\n    \"input-bool\": function( args ) {\r\n        return InputBool( args );\r\n    },\r\n    \"input-text\": function( args ) {\r\n        return InputText( args );\r\n    },\r\n    \"input-file\": function( args ) {\r\n        return InputFile( args );\r\n    },\r\n    \"input-date\": function( args ) {\r\n        return InputDate( args );\r\n    },\r\n    loop: function( args, children ) {\r\n        var list = parse( args.list );\r\n        var item = parse( args.item );\r\n        var sort = parse( args.sort );\r\n        \r\n        var arr = Data.get( list );\r\n        if( !Array.isArray( arr ) ) arr = [arr];\r\n\r\n        // Sorting.\r\n        if( typeof sort === 'string' && sort.trim().length > 0 ) {\r\n            sort = [sort];\r\n        }\r\n        if( Array.isArray( sort ) ) {\r\n            arr.sort(function( a, b ) {\r\n                var i, att;\r\n                for (i = 0 ; i < sort.length ; i++) {\r\n                    att = sort[i];\r\n                    if( a[att] < b[att] ) return -1;\r\n                    if( a[att] > b[att] ) return 1;\r\n                }\r\n                return 0;\r\n            });\r\n        }\r\n\r\n        // Filtering.\r\n        if( typeof args.filter === 'function' ) {\r\n            arr = arr.filter( args.filter );\r\n        }\r\n\r\n        var content = $.div();\r\n        arr.forEach(function ( child ) {\r\n            Data.set( item, child );\r\n            content.appendChild( module.exports( children ) );\r\n        });\r\n\r\n        return content;\r\n    }\r\n};\r\n\r\n\r\nfunction parse( input ) {\r\n    return Data.parse( input );\r\n}\r\n\r\n });\r\n"],"names":["require","exports","module","parse","input","Data","$","Tpl","InputBool","InputText","InputFile","InputDate","children","body","div","forEach","child","idx","Array","isArray","console","error","info","actionID","action","actions","element","apply","slice","location","hash","appendChild","text","args","tag","innerHTML","button","btn","on","target","length","nurse","content","appendTo","reset","key","val","set","input-bool","input-text","input-file","input-date","loop","list","item","sort","arr","get","trim","a","b","i","att","filter"],"mappings":"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"},"dependencies":["mod/app.perform-actions","mod/dom","mod/data","mod/x-template","mod/input-boolean","mod/input-text","mod/input-file","mod/input-date"]}