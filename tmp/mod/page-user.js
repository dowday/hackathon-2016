{"intl":"","src":"require( 'page-user', function(exports, module) {  var $ = require(\"dom\");\nvar WS = require(\"tfw.web-service\");\nvar Tpl = require(\"x-template\");\nvar Wdg = require(\"x-widget\");\nvar Gravatar = require(\"wdg.gravatar\");\nvar HintManager = require(\"hint-manager\");\n\nvar hintNumber = 0;\nvar hintContainer;\n\n\nexports.activate = function( id ) {\n    var container = document.getElementById( 'user-container' );\n    $.clear( container );\n    Tpl.appendTo( \"user.wait\", container );\n    Wdg.onWidgetCreation( 'qrcode2', function( wdg ) {\nconsole.info(\"[page-user] QRCode 2, id=...\", id);\n        wdg.id = id;\n    });\n    $.get( '#user-name' ).textContent = \"Unpacking your data...\";\n    WS.get( 'registration', ['get', id] ).then(\n        function( data ) {\n            APP.data = data;\n            console.info(\"[page-user] id=...\", id);\n            console.info(\"[page-user] data=...\", data);\n            if( !data ) {\n                window.location = \"?#/book/main\";\n                return;\n            }\n            $.get( '#user-name' ).textContent = data.firstname + \" \" + data.lastname.toUpperCase();\n            $.clear( container );\n            var children = Tpl.appendTo( \"user.data\", container );\n            children.img.src = Gravatar.url( id, 128 );\n            function showHint() {\n                var p = $.tag( 'p' );\n                children.planning.appendChild( p );\n                HintManager.appendTo( 'reminder' + hintNumber, p );\n                hintNumber = (hintNumber + 1) % 4;\n            }\n\n            $.on( $.get( '#random-hint' ), showHint );\n        }\n    );\n};\n });\n","zip":"require(\"page-user\",function(e,n){var r=require(\"dom\"),t=require(\"tfw.web-service\"),a=require(\"x-template\"),i=require(\"x-widget\"),o=require(\"wdg.gravatar\"),u=require(\"hint-manager\"),d=0;e.activate=function(e){var n=document.getElementById(\"user-container\");r.clear(n),a.appendTo(\"user.wait\",n),i.onWidgetCreation(\"qrcode2\",function(n){console.info(\"[page-user] QRCode 2, id=...\",e),n.id=e}),r.get(\"#user-name\").textContent=\"Unpacking your data...\",t.get(\"registration\",[\"get\",e]).then(function(t){function i(){var e=r.tag(\"p\");g.planning.appendChild(e),u.appendTo(\"reminder\"+d,e),d=(d+1)%4}if(APP.data=t,console.info(\"[page-user] id=...\",e),console.info(\"[page-user] data=...\",t),!t)return void(window.location=\"?#/book/main\");r.get(\"#user-name\").textContent=t.firstname+\" \"+t.lastname.toUpperCase(),r.clear(n);var g=a.appendTo(\"user.data\",n);g.img.src=o.url(e,128),r.on(r.get(\"#random-hint\"),i)})}});\n//# sourceMappingURL=page-user.js.map","map":{"version":3,"file":"page-user.js.map","sources":["page-user.js"],"sourcesContent":["require( 'page-user', function(exports, module) {  var $ = require(\"dom\");\nvar WS = require(\"tfw.web-service\");\nvar Tpl = require(\"x-template\");\nvar Wdg = require(\"x-widget\");\nvar Gravatar = require(\"wdg.gravatar\");\nvar HintManager = require(\"hint-manager\");\n\nvar hintNumber = 0;\nvar hintContainer;\n\n\nexports.activate = function( id ) {\n    var container = document.getElementById( 'user-container' );\n    $.clear( container );\n    Tpl.appendTo( \"user.wait\", container );\n    Wdg.onWidgetCreation( 'qrcode2', function( wdg ) {\nconsole.info(\"[page-user] QRCode 2, id=...\", id);\n        wdg.id = id;\n    });\n    $.get( '#user-name' ).textContent = \"Unpacking your data...\";\n    WS.get( 'registration', ['get', id] ).then(\n        function( data ) {\n            APP.data = data;\n            console.info(\"[page-user] id=...\", id);\n            console.info(\"[page-user] data=...\", data);\n            if( !data ) {\n                window.location = \"?#/book/main\";\n                return;\n            }\n            $.get( '#user-name' ).textContent = data.firstname + \" \" + data.lastname.toUpperCase();\n            $.clear( container );\n            var children = Tpl.appendTo( \"user.data\", container );\n            children.img.src = Gravatar.url( id, 128 );\n            function showHint() {\n                var p = $.tag( 'p' );\n                children.planning.appendChild( p );\n                HintManager.appendTo( 'reminder' + hintNumber, p );\n                hintNumber = (hintNumber + 1) % 4;\n            }\n\n            $.on( $.get( '#random-hint' ), showHint );\n        }\n    );\n};\n });\n"],"names":["require","exports","module","$","WS","Tpl","Wdg","Gravatar","HintManager","hintNumber","activate","id","container","document","getElementById","clear","appendTo","onWidgetCreation","wdg","console","info","get","textContent","then","data","showHint","p","tag","children","planning","appendChild","APP","window","location","firstname","lastname","toUpperCase","img","src","url","on"],"mappings":"AAAAA,QAAS,YAAa,SAASC,EAASC,GAAW,GAAIC,GAAIH,QAAQ,OAC/DI,EAAKJ,QAAQ,mBACbK,EAAML,QAAQ,cACdM,EAAMN,QAAQ,YACdO,EAAWP,QAAQ,gBACnBQ,EAAcR,QAAQ,gBAEtBS,EAAa,CAIjBR,GAAQS,SAAW,SAAUC,GACzB,GAAIC,GAAYC,SAASC,eAAgB,iBACzCX,GAAEY,MAAOH,GACTP,EAAIW,SAAU,YAAaJ,GAC3BN,EAAIW,iBAAkB,UAAW,SAAUC,GAC/CC,QAAQC,KAAK,+BAAgCT,GACrCO,EAAIP,GAAKA,IAEbR,EAAEkB,IAAK,cAAeC,YAAc,yBACpClB,EAAGiB,IAAK,gBAAiB,MAAOV,IAAMY,KAClC,SAAUC,GAYN,QAASC,KACL,GAAIC,GAAIvB,EAAEwB,IAAK,IACfC,GAASC,SAASC,YAAaJ,GAC/BlB,EAAYQ,SAAU,WAAaP,EAAYiB,GAC/CjB,GAAcA,EAAa,GAAK,EAZpC,GAHAsB,IAAIP,KAAOA,EACXL,QAAQC,KAAK,qBAAsBT,GACnCQ,QAAQC,KAAK,uBAAwBI,IAChCA,EAED,YADAQ,OAAOC,SAAW,eAGtB9B,GAAEkB,IAAK,cAAeC,YAAcE,EAAKU,UAAY,IAAMV,EAAKW,SAASC,cACzEjC,EAAEY,MAAOH,EACT,IAAIgB,GAAWvB,EAAIW,SAAU,YAAaJ,EAC1CgB,GAASS,IAAIC,IAAM/B,EAASgC,IAAK5B,EAAI,KAQrCR,EAAEqC,GAAIrC,EAAEkB,IAAK,gBAAkBI"},"dependencies":["mod/page-user","mod/dom","mod/tfw.web-service","mod/x-template","mod/x-widget","mod/wdg.gravatar","mod/hint-manager"]}