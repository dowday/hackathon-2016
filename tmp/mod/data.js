{"intl":"","src":"require( 'data', function(exports, module) {  var WS = require(\"tfw.web-service\");\nvar Local = require(\"tfw.storage\").local;\n\n\nvar DATA = Local.get( 'data', {} ) || {};\n\nvar MONTHES = [ 'January', 'February', 'March', 'April',\n                'May', 'June', 'July', 'August',\n                'September', 'October', 'November', 'December' ];\n\nexports.log = function( prettyprint) {\n    if( prettyprint ) {\n        console.info(\"[data] DATA=...\", JSON.stringify( DATA, null, '  ' ));\n    } else {\n        console.info(\"[data] DATA=...\", DATA);\n    }\n};\n\nexports.get = function( name ) {\n    var data = DATA;\n    var path = explodePath( name );\n    var item;\n    var key;\n    var i;\n    for( i=0 ; i<path.length ; i++ ) {\n        item = path[i];\n        data = data[item.name];\n        if( typeof data === 'undefined' ) return undefined;\n        if( Array.isArray( data ) && item.index ) {\n            key = exports.get( item.index );\n            data = data.find(function( elem ) {\n                return elem.$key == key;\n            });\n            if( typeof data === 'undefined' ) {\n                console.error( 'Key `' + key + \"` not found in `\" + name + \"` at level \" + i + \"!\" );\n                return undefined;\n            }\n        }\n    }\n\n    return data;\n};\n\nexports.set = function( name, value ) {\n    if( typeof value === 'undefined' ) value = '';\n\n    // Values are always copied.\n    // This avoid cyclic problems.\n    value = JSON.parse( JSON.stringify( value ) );\n    \n    checkValueArrays( value );\n\n    var data = DATA;\n    var path = explodePath( name );\n    var next;\n    var item;\n    var key;\n    var i;\n    for( i=0 ; i<path.length - 1 ; i++ ) {\n        item = path[i];\n        if( typeof data[item.name] === 'undefined' ) {\n            if( path.index ) {\n                data[item.name] = [{ $key: exports.get( item.index ) }];\n            } else {\n                data[item.name] = {};\n            }\n        }\n        data = data[item.name];\n        if( item.index ) {\n            key = exports.get( item.index );\n            next = data.find(function( elem ) {\n                return elem.$key == key;\n            });\n            if( typeof next === 'undefined' ) {\n                data.push({ $key: key });\n            } else {\n                data = next;\n            }\n        }\n    }\n    data[path.pop().name] = value;\n};\n\n\nexports.reset = function() {\n    var arg0 = DATA.arg0;\n    var arg1 = DATA.arg1;\n    var arg2 = DATA.arg2;\n    var arg3 = DATA.arg3;\n    DATA = {\n        arg0: arg0,\n        arg1: arg1,\n        arg2: arg2,\n        arg3: arg3\n    };\n    exports.save();\n};\n\nexports.save = function() {\n    Local.set( 'data', DATA );\n    /*\n     var data = APP.data || {};\n     data.id = APP.id;\n     console.info(\"[data] data=...\", data);\n     WS.get(\n     'registration',\n     ['set', data ]\n     );\n     */\n};\n\n\nexports.parse = function( input, context ) {\n    if( typeof context === 'undefined' ) context = {};\n\n    if( Array.isArray( input ) ) {\n        var i, item, result;\n        for (i = 0 ; i < input.length ; i++) {\n            item = input[i];\n            result = exports.parse( item );\n            if( typeof result !== 'undefined' && result !== 'null' ) return result;\n        }\n    }\n    else if( typeof input === 'function' ) {\n        return exports.parse( input.call( exports ) );\n    }\n    else if( typeof input === 'string' ) {\n        var cursor = 0;\n        var posStart;\n        var posEnd;\n        var output = '';\n        var variable;\n        while( true ) {\n            posStart = input.indexOf( '{{', cursor );\n            if( posStart == -1 ) break;\n            output += input.substr( cursor, posStart - cursor );\n            cursor = posStart + 2;\n            posEnd = input.indexOf( '}}', cursor );\n            if( posEnd == -1 ) break;\n            variable = input.substr( cursor, posEnd - cursor ).trim().split( '|' );\n            if( typeof context[variable[0]] !== 'undefined' ) {\n                // This is a frozen var. Used in looping context.\n                variable[0] = context[variable[0]];\n            } else {\n                variable[0] = exports.get( variable[0] ) || '';\n            }\n            for( i = 1 ; i < variable.length ; i++ ) {\n                variable[0] = format( variable[0], variable[i] );\n            }\n            output += variable[0];\n            cursor = posEnd + 2;\n        }\n        return output + input.substr( cursor );\n    }\n\n    return undefined;\n};\n\n\n/**\n * Examples of numeric dates are: `20160501`, `201605011830`.\n * Time can be added, but just hours and minutes.\n */\nexports.num2dat = function( num ) {\n    var txt = \"\" + num;\n    while( txt.length < 12 ) txt += \"0\";\n    return new Date(\n        parseInt( txt.substr( 0, 4) ),\n        parseInt( txt.substr( 4, 2) ) - 1,\n        parseInt( txt.substr( 6, 2) ),\n        parseInt( txt.substr( 8, 2) ),\n        parseInt( txt.substr( 10, 2) ),\n        0\n    );\n};\n\n\nexports.pad = function( value, size, filler ) {\n    if( typeof size === 'undefined' ) size = 2;\n    if( typeof filler === 'undefined' ) filler = '0';\n\n    value = \"\" + value;\n    while( value.length < size ) value = filler + value;\n    return value;\n};\n\n\n/**\n * Push `value` into an array called `name`.\n */\nexports.push = function( name, value ) {\n    var arr = exports.get( name );\n    if( !Array.isArray( arr ) ) {\n        console.error( \"[Data.push] `\" + name + \"` is not an array!\" );\n        return 0;\n    }\n    checkValueArrays( arr );\n    if( typeof value !== 'object' || Array.isArray( value )) {\n        value = { value: value };\n    }\n    value.$key = arr.$key++;\n    arr.push( value );\n    return value.$key;\n};\n\n/**\n * Remove in  array `arrName`  the item  with the  key given  by the\n * value of `keyName`.\n */\nexports.remove = function( arrName, keyName ) {\n    var arr = exports.get( arrName );\n    var key = exports.get( keyName );\n    var idx = arr.findIndex(function( item ) {\n        return item.$key == key;\n    });\n    if( idx == -1 ) return false;\n    arr.splice( idx, 1 );\n    return true;\n};\n\n\n\n/**\n * In  an array,  each item  must have  the `$key'  property. This  is\n * needed if you need to remove an element from that list.\n * Keys are just  incremenral numbers relative to the  array the items\n * belong. So  the array itself has  a `$key` attribute to  store this\n * increment.\n */\nfunction checkValueArrays( value ) {\n    if( Array.isArray( value ) ) {\n        if( typeof value.$key !== 'number' ) {\n            // New ID for elements of this array.\n            value.$key = 1;\n        }\n        var values = [];\n        value.forEach(function ( item ) {\n            if( typeof item !== 'object' || Array.isArray( item )) {\n                item = { value: item };\n            }            \n            if( typeof item.$key !== 'number' ) {\n                item.$key = value.$key++;\n            }\n            checkValueArrays( item );\n            values.push( item );\n        });\n        value.splice( 0, value.length );\n        values.forEach(function ( item ) {\n            value.push( item );\n        });\n\n    }\n    else if( typeof value === 'object' ) {\n        var key;\n        for( key in value ) {\n            checkValueArrays( value[key] );\n        }\n    }\n}\n\n\nfunction format( value, type ) {\n    switch( type ) {\n    case 'date':\n        value = exports.num2dat( value );\n        return MONTHES[value.getMonth()] + \" \" + value.getDate() + \", \" + value.getFullYear();\n    case 'time':\n        value = exports.num2dat( value );\n        return value.getHours() + \":\" + exports.pad( value.getMinutes() );\n    case 'datetime':\n        value = exports.num2dat( value );\n        return MONTHES[value.getMonth()] + \" \" + value.getDate() + \", \" + value.getFullYear()\n            + \"  \" + value.getHours() + \":\" + exports.pad( value.getMinutes() );\n    }\n    return value;\n}\n\nfunction explodePath( name ) {\n    var start = 0;\n    var cursor = 0;\n    var mode = 0;\n    var path = [];\n    var pathItem;\n    var c;\n\n    for( cursor = 0 ; cursor < name.length ; cursor++ ) {\n        c = name.charAt( cursor );\n        if( mode == 0 ) {\n            if( c == '[' || c == '.' ) {\n                pathItem = { name: name.substr( start, cursor - start ) };\n                path.push( pathItem );\n                start = cursor + 1;\n                if( c == '[' ) {\n                    mode = 1;\n                }\n            }\n        }\n        else if( mode == -1 ) {\n            // After a `]`, we must find a `.`.\n            if( c == '.' ) {\n                start = cursor + 1;\n                mode = 0;\n            }\n            else {\n                console.error( \"Bad var name!\\n\" + name + \"\\nPos: \" + cursor );\n            }\n        }\n        else {\n            if( c == '[' ) {\n                mode++;\n            }\n            else if( c == ']' ) {\n                mode--;\n                if( mode == 0 ) {\n                    pathItem.index = name.substr( start, cursor - start );\n                    start = cursor + 1;\n                    mode = -1;\n                }\n            }\n        }\n    }\n    if( mode == 0 ) {\n        path.push( { name: name.substr( start ) } );\n    }\n    else {\n        console.error( \"Bad ending for var name!\\n\" + name );\n    }\n\n    return path;\n}\n });\n","zip":"require(\"data\",function(e,r){function n(e){if(Array.isArray(e)){\"number\"!=typeof e.$key&&(e.$key=1);var r=[];e.forEach(function(t){(\"object\"!=typeof t||Array.isArray(t))&&(t={value:t}),\"number\"!=typeof t.$key&&(t.$key=e.$key++),n(t),r.push(t)}),e.splice(0,e.length),r.forEach(function(r){e.push(r)})}else if(\"object\"==typeof e){var t;for(t in e)n(e[t])}}function t(r,n){switch(n){case\"date\":return r=e.num2dat(r),i[r.getMonth()]+\" \"+r.getDate()+\", \"+r.getFullYear();case\"time\":return r=e.num2dat(r),r.getHours()+\":\"+e.pad(r.getMinutes());case\"datetime\":return r=e.num2dat(r),i[r.getMonth()]+\" \"+r.getDate()+\", \"+r.getFullYear()+\"  \"+r.getHours()+\":\"+e.pad(r.getMinutes())}return r}function a(e){var r,n,t=0,a=0,u=0,o=[];for(a=0;a<e.length;a++)n=e.charAt(a),0==u?\"[\"!=n&&\".\"!=n||(r={name:e.substr(t,a-t)},o.push(r),t=a+1,\"[\"==n&&(u=1)):-1==u?\".\"==n?(t=a+1,u=0):console.error(\"Bad var name!\\n\"+e+\"\\nPos: \"+a):\"[\"==n?u++:\"]\"==n&&(u--,0==u&&(r.index=e.substr(t,a-t),t=a+1,u=-1));return 0==u?o.push({name:e.substr(t)}):console.error(\"Bad ending for var name!\\n\"+e),o}var u=(require(\"tfw.web-service\"),require(\"tfw.storage\").local),o=u.get(\"data\",{})||{},i=[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"];e.log=function(e){e?console.info(\"[data] DATA=...\",JSON.stringify(o,null,\"  \")):console.info(\"[data] DATA=...\",o)},e.get=function(r){var n,t,u,i=o,f=a(r);for(u=0;u<f.length;u++){if(n=f[u],i=i[n.name],\"undefined\"==typeof i)return;if(Array.isArray(i)&&n.index&&(t=e.get(n.index),i=i.find(function(e){return e.$key==t}),\"undefined\"==typeof i))return void console.error(\"Key `\"+t+\"` not found in `\"+r+\"` at level \"+u+\"!\")}return i},e.set=function(r,t){\"undefined\"==typeof t&&(t=\"\"),t=JSON.parse(JSON.stringify(t)),n(t);var u,i,f,s,d=o,y=a(r);for(s=0;s<y.length-1;s++)i=y[s],\"undefined\"==typeof d[i.name]&&(y.index?d[i.name]=[{$key:e.get(i.index)}]:d[i.name]={}),d=d[i.name],i.index&&(f=e.get(i.index),u=d.find(function(e){return e.$key==f}),\"undefined\"==typeof u?d.push({$key:f}):d=u);d[y.pop().name]=t},e.reset=function(){var r=o.arg0,n=o.arg1,t=o.arg2,a=o.arg3;o={arg0:r,arg1:n,arg2:t,arg3:a},e.save()},e.save=function(){u.set(\"data\",o)},e.parse=function(r,n){if(\"undefined\"==typeof n&&(n={}),Array.isArray(r)){var a,u,o;for(a=0;a<r.length;a++)if(u=r[a],o=e.parse(u),\"undefined\"!=typeof o&&\"null\"!==o)return o}else{if(\"function\"==typeof r)return e.parse(r.call(e));if(\"string\"==typeof r){for(var i,f,s,d=0,y=\"\";;){if(i=r.indexOf(\"{{\",d),-1==i)break;if(y+=r.substr(d,i-d),d=i+2,f=r.indexOf(\"}}\",d),-1==f)break;for(s=r.substr(d,f-d).trim().split(\"|\"),\"undefined\"!=typeof n[s[0]]?s[0]=n[s[0]]:s[0]=e.get(s[0])||\"\",a=1;a<s.length;a++)s[0]=t(s[0],s[a]);y+=s[0],d=f+2}return y+r.substr(d)}}},e.num2dat=function(e){for(var r=\"\"+e;r.length<12;)r+=\"0\";return new Date(parseInt(r.substr(0,4)),parseInt(r.substr(4,2))-1,parseInt(r.substr(6,2)),parseInt(r.substr(8,2)),parseInt(r.substr(10,2)),0)},e.pad=function(e,r,n){for(\"undefined\"==typeof r&&(r=2),\"undefined\"==typeof n&&(n=\"0\"),e=\"\"+e;e.length<r;)e=n+e;return e},e.push=function(r,t){var a=e.get(r);return Array.isArray(a)?(n(a),(\"object\"!=typeof t||Array.isArray(t))&&(t={value:t}),t.$key=a.$key++,a.push(t),t.$key):(console.error(\"[Data.push] `\"+r+\"` is not an array!\"),0)},e.remove=function(r,n){var t=e.get(r),a=e.get(n),u=t.findIndex(function(e){return e.$key==a});return-1==u?!1:(t.splice(u,1),!0)}});\n//# sourceMappingURL=data.js.map","map":{"version":3,"file":"data.js.map","sources":["data.js"],"sourcesContent":["require( 'data', function(exports, module) {  var WS = require(\"tfw.web-service\");\nvar Local = require(\"tfw.storage\").local;\n\n\nvar DATA = Local.get( 'data', {} ) || {};\n\nvar MONTHES = [ 'January', 'February', 'March', 'April',\n                'May', 'June', 'July', 'August',\n                'September', 'October', 'November', 'December' ];\n\nexports.log = function( prettyprint) {\n    if( prettyprint ) {\n        console.info(\"[data] DATA=...\", JSON.stringify( DATA, null, '  ' ));\n    } else {\n        console.info(\"[data] DATA=...\", DATA);\n    }\n};\n\nexports.get = function( name ) {\n    var data = DATA;\n    var path = explodePath( name );\n    var item;\n    var key;\n    var i;\n    for( i=0 ; i<path.length ; i++ ) {\n        item = path[i];\n        data = data[item.name];\n        if( typeof data === 'undefined' ) return undefined;\n        if( Array.isArray( data ) && item.index ) {\n            key = exports.get( item.index );\n            data = data.find(function( elem ) {\n                return elem.$key == key;\n            });\n            if( typeof data === 'undefined' ) {\n                console.error( 'Key `' + key + \"` not found in `\" + name + \"` at level \" + i + \"!\" );\n                return undefined;\n            }\n        }\n    }\n\n    return data;\n};\n\nexports.set = function( name, value ) {\n    if( typeof value === 'undefined' ) value = '';\n\n    // Values are always copied.\n    // This avoid cyclic problems.\n    value = JSON.parse( JSON.stringify( value ) );\n    \n    checkValueArrays( value );\n\n    var data = DATA;\n    var path = explodePath( name );\n    var next;\n    var item;\n    var key;\n    var i;\n    for( i=0 ; i<path.length - 1 ; i++ ) {\n        item = path[i];\n        if( typeof data[item.name] === 'undefined' ) {\n            if( path.index ) {\n                data[item.name] = [{ $key: exports.get( item.index ) }];\n            } else {\n                data[item.name] = {};\n            }\n        }\n        data = data[item.name];\n        if( item.index ) {\n            key = exports.get( item.index );\n            next = data.find(function( elem ) {\n                return elem.$key == key;\n            });\n            if( typeof next === 'undefined' ) {\n                data.push({ $key: key });\n            } else {\n                data = next;\n            }\n        }\n    }\n    data[path.pop().name] = value;\n};\n\n\nexports.reset = function() {\n    var arg0 = DATA.arg0;\n    var arg1 = DATA.arg1;\n    var arg2 = DATA.arg2;\n    var arg3 = DATA.arg3;\n    DATA = {\n        arg0: arg0,\n        arg1: arg1,\n        arg2: arg2,\n        arg3: arg3\n    };\n    exports.save();\n};\n\nexports.save = function() {\n    Local.set( 'data', DATA );\n    /*\n     var data = APP.data || {};\n     data.id = APP.id;\n     console.info(\"[data] data=...\", data);\n     WS.get(\n     'registration',\n     ['set', data ]\n     );\n     */\n};\n\n\nexports.parse = function( input, context ) {\n    if( typeof context === 'undefined' ) context = {};\n\n    if( Array.isArray( input ) ) {\n        var i, item, result;\n        for (i = 0 ; i < input.length ; i++) {\n            item = input[i];\n            result = exports.parse( item );\n            if( typeof result !== 'undefined' && result !== 'null' ) return result;\n        }\n    }\n    else if( typeof input === 'function' ) {\n        return exports.parse( input.call( exports ) );\n    }\n    else if( typeof input === 'string' ) {\n        var cursor = 0;\n        var posStart;\n        var posEnd;\n        var output = '';\n        var variable;\n        while( true ) {\n            posStart = input.indexOf( '{{', cursor );\n            if( posStart == -1 ) break;\n            output += input.substr( cursor, posStart - cursor );\n            cursor = posStart + 2;\n            posEnd = input.indexOf( '}}', cursor );\n            if( posEnd == -1 ) break;\n            variable = input.substr( cursor, posEnd - cursor ).trim().split( '|' );\n            if( typeof context[variable[0]] !== 'undefined' ) {\n                // This is a frozen var. Used in looping context.\n                variable[0] = context[variable[0]];\n            } else {\n                variable[0] = exports.get( variable[0] ) || '';\n            }\n            for( i = 1 ; i < variable.length ; i++ ) {\n                variable[0] = format( variable[0], variable[i] );\n            }\n            output += variable[0];\n            cursor = posEnd + 2;\n        }\n        return output + input.substr( cursor );\n    }\n\n    return undefined;\n};\n\n\n/**\n * Examples of numeric dates are: `20160501`, `201605011830`.\n * Time can be added, but just hours and minutes.\n */\nexports.num2dat = function( num ) {\n    var txt = \"\" + num;\n    while( txt.length < 12 ) txt += \"0\";\n    return new Date(\n        parseInt( txt.substr( 0, 4) ),\n        parseInt( txt.substr( 4, 2) ) - 1,\n        parseInt( txt.substr( 6, 2) ),\n        parseInt( txt.substr( 8, 2) ),\n        parseInt( txt.substr( 10, 2) ),\n        0\n    );\n};\n\n\nexports.pad = function( value, size, filler ) {\n    if( typeof size === 'undefined' ) size = 2;\n    if( typeof filler === 'undefined' ) filler = '0';\n\n    value = \"\" + value;\n    while( value.length < size ) value = filler + value;\n    return value;\n};\n\n\n/**\n * Push `value` into an array called `name`.\n */\nexports.push = function( name, value ) {\n    var arr = exports.get( name );\n    if( !Array.isArray( arr ) ) {\n        console.error( \"[Data.push] `\" + name + \"` is not an array!\" );\n        return 0;\n    }\n    checkValueArrays( arr );\n    if( typeof value !== 'object' || Array.isArray( value )) {\n        value = { value: value };\n    }\n    value.$key = arr.$key++;\n    arr.push( value );\n    return value.$key;\n};\n\n/**\n * Remove in  array `arrName`  the item  with the  key given  by the\n * value of `keyName`.\n */\nexports.remove = function( arrName, keyName ) {\n    var arr = exports.get( arrName );\n    var key = exports.get( keyName );\n    var idx = arr.findIndex(function( item ) {\n        return item.$key == key;\n    });\n    if( idx == -1 ) return false;\n    arr.splice( idx, 1 );\n    return true;\n};\n\n\n\n/**\n * In  an array,  each item  must have  the `$key'  property. This  is\n * needed if you need to remove an element from that list.\n * Keys are just  incremenral numbers relative to the  array the items\n * belong. So  the array itself has  a `$key` attribute to  store this\n * increment.\n */\nfunction checkValueArrays( value ) {\n    if( Array.isArray( value ) ) {\n        if( typeof value.$key !== 'number' ) {\n            // New ID for elements of this array.\n            value.$key = 1;\n        }\n        var values = [];\n        value.forEach(function ( item ) {\n            if( typeof item !== 'object' || Array.isArray( item )) {\n                item = { value: item };\n            }            \n            if( typeof item.$key !== 'number' ) {\n                item.$key = value.$key++;\n            }\n            checkValueArrays( item );\n            values.push( item );\n        });\n        value.splice( 0, value.length );\n        values.forEach(function ( item ) {\n            value.push( item );\n        });\n\n    }\n    else if( typeof value === 'object' ) {\n        var key;\n        for( key in value ) {\n            checkValueArrays( value[key] );\n        }\n    }\n}\n\n\nfunction format( value, type ) {\n    switch( type ) {\n    case 'date':\n        value = exports.num2dat( value );\n        return MONTHES[value.getMonth()] + \" \" + value.getDate() + \", \" + value.getFullYear();\n    case 'time':\n        value = exports.num2dat( value );\n        return value.getHours() + \":\" + exports.pad( value.getMinutes() );\n    case 'datetime':\n        value = exports.num2dat( value );\n        return MONTHES[value.getMonth()] + \" \" + value.getDate() + \", \" + value.getFullYear()\n            + \"  \" + value.getHours() + \":\" + exports.pad( value.getMinutes() );\n    }\n    return value;\n}\n\nfunction explodePath( name ) {\n    var start = 0;\n    var cursor = 0;\n    var mode = 0;\n    var path = [];\n    var pathItem;\n    var c;\n\n    for( cursor = 0 ; cursor < name.length ; cursor++ ) {\n        c = name.charAt( cursor );\n        if( mode == 0 ) {\n            if( c == '[' || c == '.' ) {\n                pathItem = { name: name.substr( start, cursor - start ) };\n                path.push( pathItem );\n                start = cursor + 1;\n                if( c == '[' ) {\n                    mode = 1;\n                }\n            }\n        }\n        else if( mode == -1 ) {\n            // After a `]`, we must find a `.`.\n            if( c == '.' ) {\n                start = cursor + 1;\n                mode = 0;\n            }\n            else {\n                console.error( \"Bad var name!\\n\" + name + \"\\nPos: \" + cursor );\n            }\n        }\n        else {\n            if( c == '[' ) {\n                mode++;\n            }\n            else if( c == ']' ) {\n                mode--;\n                if( mode == 0 ) {\n                    pathItem.index = name.substr( start, cursor - start );\n                    start = cursor + 1;\n                    mode = -1;\n                }\n            }\n        }\n    }\n    if( mode == 0 ) {\n        path.push( { name: name.substr( start ) } );\n    }\n    else {\n        console.error( \"Bad ending for var name!\\n\" + name );\n    }\n\n    return path;\n}\n });\n"],"names":["require","exports","module","checkValueArrays","value","Array","isArray","$key","values","forEach","item","push","splice","length","key","format","type","num2dat","MONTHES","getMonth","getDate","getFullYear","getHours","pad","getMinutes","explodePath","name","pathItem","c","start","cursor","mode","path","charAt","substr","console","error","index","Local","local","DATA","get","log","prettyprint","info","JSON","stringify","i","data","find","elem","set","parse","next","pop","reset","arg0","arg1","arg2","arg3","save","input","context","result","call","posStart","posEnd","variable","output","indexOf","trim","split","num","txt","Date","parseInt","size","filler","arr","remove","arrName","keyName","idx","findIndex"],"mappings":"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"},"dependencies":["mod/data","mod/tfw.web-service","mod/tfw.storage"]}