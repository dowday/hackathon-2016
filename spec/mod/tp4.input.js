require("tp4.input",function(t,e){var i=require("wdg"),n=function(t){i.call(this);var e=i.tag("input");this._input=e;var n=this;this.addClass("tp4-input"),"object"!=typeof t&&(t={}),"string"!=typeof t.type&&(t.type="text"),e.attr("type",t.type),"undefined"!=typeof t.size&&(e.attr("size",t.size),this.css("width",2+t.size+"em")),"string"==typeof t.placeholder&&e.attr("placeholder",t.placeholder),"undefined"!=typeof t.autofocus&&e.attr("autofocus",1),"undefined"!=typeof t.width&&("number"==typeof t.width&&(t.width=""+t.width+"em"),this.css("width",t.width));var o=t.onValid;if("object"==typeof o&&"function"==typeof o.enabled?t.onValid=function(t){o.enabled(t)}:"function"!=typeof o&&(t.onValid=null),"object"==typeof t.validator){var a=t.validator;t.validator=function(t){return a.test(t)}}else if("function"==typeof t.validator){var r=t.validator;t.validator=function(t){return r.call(n,t)}}if(this._valid=0,e.addEvent("keyup",function(){n.validate(),n._onChange()}),"object"==typeof t.onEnter&&"function"==typeof t.onEnter.fire){var u=t.onEnter;t.onEnter=function(){u.fire()}}if("function"==typeof t.onEnter&&e.addEvent("keyup",function(e){n._valid>-1&&13==e.keyCode?window.setTimeout(function(){t.onEnter(n)}):n.validate()}),"string"!=typeof t.value&&(t.value=""),e.addEvent("focus",function(){n.selectAll()}),this._opts=t,this.val(t.value),"undefined"!=typeof t.label){var l=i.div("label").text(t.label).attr("title",t.label);this.append(l)}this.append(e)};n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.prototype.validate=function(){var t=this._opts;if("function"!=typeof t.validator)return this;var e=t.onValid;try{t.validator(this.val())?(this._valid=1,this._input.removeClass("not-valid").addClass("valid"),e&&e(!0,this)):(this._valid=-1,this._input.removeClass("valid").addClass("not-valid"),e&&e(!1,this))}catch(i){console.error("[tp4.input] Validation error: ",i)}return this},n.prototype.fireChange=function(){return this._onChange(),this},n.prototype._onChange=function(){var t=this._Change;"function"==typeof t&&t.call(this)},n.prototype.Change=function(t){return"undefined"==typeof t?this._Change:("function"==typeof t&&(this._Change=t),this)},n.prototype.selectAll=function(){var t=this._input.element();return t.setSelectionRange(0,t.value.length),!0},n.prototype.val=function(t){var e=this._input.element();return"undefined"==typeof t?e.value:(e.value=t,this.validate(),this)},n.prototype.focus=function(){var t=this._input.element();return window.setTimeout(function(){t.focus()},1),this},n.prototype.isValid=function(){return 1==this._valid},n.prototype.enabled=function(t){return"undefined"==typeof t?this._input.hasAttr("disabled"):(t?this._input.removeAttr("disabled"):this._input.attr("disabled","true"),this)},n.create=function(t){return new n(t)},e.exports=n});
//# sourceMappingURL=tp4.input.js.map