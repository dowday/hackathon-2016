require("tp4.button",function(e,t){function n(){return r(o,arguments)}function i(e,t,i){var o=new p({caption:n(e)});if(t.length>0){var r,a;for(r=0;r<t.length;r++)a=t[r],o.addClass(a)}else{if("undefined"==typeof i)return o;Array.isArray(i)||(i=[i]),i.forEach(function(e){o.addClass(e)})}return o}var o={en:{cancel:"Cancel",close:"Close","delete":"Delete",edit:"Edit",no:"No",ok:"OK",save:"Save",yes:"Yes"},fr:{cancel:"Annuler",close:"Fermer","delete":"Supprimer",edit:"Editer",no:"Non",ok:"Valider",save:"Sauver",yes:"Oui"}},r=require("$").intl,a=require("wdg"),s=require("tp4.wait").create,p=function(e){var t=this;a.call(this,{tag:"a"}),this.addClass("tp4-button").attr("href","#");var n=typeof e;if("string"===n?e={caption:e}:"object"!==n&&(e={}),"undefined"==typeof e.caption&&(e.caption="OK"),e.simple&&this.addClass("simple"),"undefined"==typeof e.enabled&&(e.enabled=!0),"string"==typeof e.email&&(e.email={to:e.email}),"object"==typeof e.email){"string"!=typeof e.email.to&&(e.email.to="contact@trail-passion.net"),"string"!=typeof e.email.subject&&(e.email.subject="Trail-Passion"),"string"!=typeof e.email.body&&(e.email.body="");var i="mailto:"+e.email.to+"?subject="+encodeURIComponent(e.email.subject)+"&body="+encodeURIComponent(e.email.body);console.info("[tp4.button] href=...",i),e.href=i}"string"==typeof e.href&&t.attr("href",e.href),"string"==typeof e.target&&t.attr("target",e.target),this.enabled(e.enabled),"string"==typeof e.help&&this.Tap(function(){open("http://help.trail-passion.net/"+e.help,"HELP")}),this.caption(e.caption),this.addEvent("mousedown",function(){t.addClass("press")}),this.addEvent("mouseup",function(){t.removeClass("press")}),this.element().addEventListener("keydown",function(e){13!=e.keyCode&&32!=e.keyCode||(e.preventDefault(),e.stopPropagation(),t.fire())},!1)};p.prototype=Object.create(a.prototype),p.prototype.constructor=p,p.prototype.enabled=function(e){return"undefined"==typeof e?this._enabled:(e?this.removeAttr("disabled"):this.attr("disabled","yes"),this._enabled=e,this)},p.prototype.Tap=function(e,t){if("undefined"==typeof e)return a.prototype.Tap.call(this);var n=this;"undefined"==typeof t&&(t=n),"string"==typeof e&&(e=t[e]);var i=function(){n._enabled&&e.call(t,this)};return a.prototype.Tap.call(this,i),this},p.prototype.caption=function(e){return"undefined"==typeof e?this._caption:(this._caption=e,this.attr("title",e).text(e),this)},p.prototype.waitOn=function(e){"undefined"==typeof e&&(e=this.caption()),this.enabled(!1),this.clear(s({size:"1em",caption:e}))},p.prototype.waitOff=function(){this.caption(this.caption()),this.enabled(!0)},p.prototype.fire=function(){var e=this.Tap();return Array.isArray(e)?(e[0].call(e[1],this),this):this},p.create=function(e){return new p(e)},p.createSimple=function(e){return new p({caption:e,simple:!0})},p.Cancel=function(){return i("cancel",arguments)},p.Close=function(){return i("close",arguments,"simple")},p.Delete=function(){return i("delete",arguments,"warning")},p.No=function(){return i("no",arguments)},p.Ok=function(){return i("ok",arguments)},p.Edit=function(){return i("edit",arguments)},p.Save=function(){return i("save",arguments,"warning")},p.Yes=function(){return i("yes",arguments)},t.exports=p});
//# sourceMappingURL=tp4.button.js.map