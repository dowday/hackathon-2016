require("page-user",function(e,t){var a=require("dom"),n=require("tfw.web-service"),r=require("x-template"),i=require("x-widget"),o=require("wdg.gravatar");e.activate=function(e){var t=document.getElementById("user-container");a.clear(t),r.appendTo("user.wait",t),i.onWidgetCreation("qrcode2",function(t){t.id=e}),a.get("#user-name").textContent="Unpacking your data...",n.get("registration",["get",e]).then(function(n){if(APP.data=n,console.info("[page-user] id=...",e),console.info("[page-user] data=...",n),!n)return void(window.location="?#/book/main");a.get("#user-name").textContent=n.firstname+" "+n.lastname.toUpperCase(),console.info("[page-user] data=...",n),a.clear(t);var i=r.appendTo("user.data",t);console.info("[page-user] children=...",i),i.img.src=o.url(e,128);var s=i.planning;a.clear(s),Array.isArray(n.planning)&&n.planning.forEach(function(e){var t=r.appendTo("user.visit",s);t.visitName.textContent=e.name,t.visitDate.textContent=e.date,t.visitName.setAttribute("href","https://www.google.ch/maps/search/"+(""+e.address).replace(/[ ]/g,"+"))})})}});
//# sourceMappingURL=page-user.js.map